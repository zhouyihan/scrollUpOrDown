<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>填写领奖信息</title>
		<link href="css/twelve.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript" src="../../js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="../../js/jquery.validate.min.js"></script>
		<script type="text/javascript" src="../../js/main.js"></script>
		<script type="text/javascript">
$(document).ready(function(){
	var changeGift=parent.giftName;
	//var tipsMsgObj=$('恭喜您抽中'+changeGift+'<br/>活动结束后，我们将统一发放奖品<br/>填写收货信息');
	$("#giftNameFont").text("恭喜您抽中"+changeGift);
	
	$("#materObjForm").validate({
		errorElement : "em",
		errorClass : "error",
		rules : {
			companyName:{
				required:true,
				onlyLetterAndChinese:true,
				byteRangeLength:[0, 30]
			},
			contactPerson:{
				required:true,
				onlyLetterAndChinese:true,
				byteRangeLength:[0, 30]
			},
			mobile:{
				required:true,
				isMobile:true
			},
			email:{
				required:true,
				email:true
			},
			address:{
				required:true,
				byteRangeLength:[0, 60]
			}
		},
		messages : {
			companyName:{
				required:"请填写公司名称"
			},
			contactPerson:{
				required:"请输入联系人"
			},
			mobile:{
				required:"请输入手机号"
			},
			email:{
				required:"请输入邮箱",
				email:"请输入正确的邮箱格式"
			},
			address:{
				required:"请输入地址"
			}
		},
		errorPlacement : function(error, element) {
			error.appendTo(element.parent());
		}
	});
});

function submitGetGiftMobile(){
	if($("#materObjForm").valid()){
		var recordId=parent.lottery.winRecordId;
		var mobile=$("#mobile").val();
		var companyName=$("#companyName").val();
		var contactPerson=$("#contactPerson").val();
		var email=$("#email").val();
		var address=$("#address").val();
		$.ajax({
			type : "POST",
			url : "../../activity/uploadCwheelGiftInfo",
			data:{mobile:mobile,companyName:companyName,contactPerson:contactPerson,email:email,address:address,recordId:recordId},
			dataType : "json",
			async:false,
			success : function(returnData) {
				if(returnData.flag){
					alert("信息上传成功!请静候您的奖品");
					var index = parent.layer.getFrameIndex(window.name); //获取当前窗体索引
					parent.layer.close(index);
				}else{
					alert(returnData.errorMsg);
				}
			}
		});
	}
}
</script>
	</head>
	<body>
		<div class="answerbox">
			<!--实物需要地址-->
			<h3 class="address_t" id="giftNameFont"></h3>
			<p class="address_con">请填写领奖联系方式</p>
			<form action="" name="materObjForm" id="materObjForm" method="post">
			<ul class="addresslist">
				<li>
					<label class="label"><em class="star">*</em>公司名称：</label>
					<input type="text" class="txt" id="companyName" name="companyName"/>
				</li>
				<li>
					<label class="label"><em class="star">*</em>联系人：</label>
					<input type="text" class="txt" id="contactPerson" name="contactPerson"/>
				</li>
				<li>
					<label class="label"><em class="star">*</em>联系手机：</label>
					<input type="text" class="txt" id="mobile" name="mobile"/>
				</li>
				<li>
					<label class="label"><em class="star">*</em>邮箱：</label>
					<input type="text" class="txt" id="email" name="email"/>
				</li>
				<li>
					<label class="label"><em class="star">*</em>地址：</label>
					<input type="text" class="txt" id="address" name="address"/>
				</li>
				<li>
					<label class="label">&nbsp;</label>
					<a href="javascript:void(0)" class="btn" onclick="submitGetGiftMobile()" style="margin-left:80px;"><i>确认提交</i></a>
				</li>
			</ul>
			</form>
		</div>
	</body>
</html>